(function(e){function t(t){for(var r,o,s=t[0],u=t[1],l=t[2],h=0,d=[];h<s.length;h++)o=s[h],n[o]&&d.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var u=a[s];0!==n[u]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/gm2048/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"34fe":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var r=a("2b0e"),n=a("ead5"),i=a.n(n),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("img",{attrs:{alt:"Vue logo",src:a("cf05")}}),r("GameField")],1)},s=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"game-container"},[a("div",{staticClass:"board shadow-border"},[e._l(this.board,function(e,t){return a("div",{key:t},[a("Cell",{attrs:{cell:e,actValue:e.value}})],1)}),a("transition",{attrs:{name:"fade"}},[e.checkGameOver?a("div",{staticClass:"modal"},[a("h1",[e._v("Game Over!")]),a("a",{staticClass:"button button-black",on:{click:function(t){e.newGame()}}},[e._v("Try again")])]):e._e()])],2),a("div",{staticClass:"column-buttons"},[a("button",{staticClass:"menu-but",on:{click:function(t){e.newGame()}}},[e._v("New Game")]),a("button",{staticClass:"menu-but",on:{click:function(t){e.saveGame()}}},[e._v("Save game")]),e.emptyStorage?e._e():a("button",{staticClass:"menu-but",on:{click:function(t){e.resumeGame()}}},[e._v("Resume Game")])])])},l=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell",class:{"tile-empty":e.emptyTile},style:{backgroundColor:e.backgroundColor}},[e._v("\n  "+e._s(e.displayValue)+"\n")])},h=[],d=(a("6b54"),a("c5f6"),{name:"Cell",props:{cell:{type:Object,required:!0},actValue:{type:Number,required:!0}},data:function(){return{colors:["#c2c2c2","#c7a2a2","#eb8787","#f05757","#cf2424","#9b2222","#661e1e","#3d0909","#3a1004","#86260c","#be4726","#ff7b00","#a55000","#613c1a"]}},computed:{value:function(){return this.cell.value},displayValue:function(){return this.actValue>0?this.actValue:null},emptyTile:function(){return null===this.displayValue},backgroundColor:function(){return this.colors[this.actValue.toString(2).length-1]}}}),m=d,f=(a("b0ce"),a("2877")),v=Object(f["a"])(m,c,h,!1,null,"207342af",null);v.options.__file="Cell.vue";var g=v.exports,p=a("6118"),b=a.n(p),y={methods:{animate:function(){var e=this,t=this.mergeGameStateList.length>0||this.slideGameStateList.length>0;t&&setTimeout(function(){e.generateNum(),e.$store.commit("saveGameBoard",e.board)},100)},getChangeLists:function(e){var t={};return"gamestate"===e&&(t.merge=this.mergeGameStateList,t.slide=this.slideGameStateList),t},rotateMatrixToTheRight:function(e){e=e.reverse();for(var t=0;t<e.length;t+=1)for(var a=0;a<t;a+=1){var r=e[t][a];e[t][a]=e[a][t],e[a][t]=r}return e},rotateMatrixToTheLeft:function(e){e=e.map(function(e){return e.reverse()});for(var t=0;t<e.length;t+=1)for(var a=0;a<t;a+=1){var r=e[t][a];e[t][a]=e[a][t],e[a][t]=r}return e},move:function(e){var t=b()(this.board,4);39===e?this.moveRight("gamestate",t):37===e?(this.rotateMatrixToTheRight(t),this.rotateMatrixToTheRight(t),this.moveRight("gamestate",t),this.rotateMatrixToTheRight(t),this.rotateMatrixToTheRight(t)):38===e?(this.rotateMatrixToTheRight(t),this.moveRight("gamestate",t),this.rotateMatrixToTheLeft(t)):40===e&&(this.rotateMatrixToTheLeft(t),this.moveRight("gamestate",t),this.rotateMatrixToTheRight(t)),this.board=t.reduce(function(e,t){return e.concat(t)},[]),this.slided&&(this.animate(),this.slided=!1)},moveRight:function(e,t){for(var a=this.getChangeLists(e),r=0;r<t.length;r+=1)this.mergeRight(t,r,a),this.slideRight(t,r,a)},mergeRight:function(e,t,a){var r=e.length-2,n=e.length-1;while(r>=0)0===e[t][r].value&&0===e[t][n].value?(n-=1,r-=1):e[t][r].value===e[t][n].value?(a.merge.push({from:4*t+r,to:4*t+n}),e[t][n].value=e[t][r].value+e[t][n].value,e[t][r].value=0,n-=1,r-=1,this.slided=!0):0===e[t][n].value?(n-=1,r-=1):0!==e[t][r].value&&0!==e[t][n].value&&r+1===n?(n-=1,r-=1):0!==e[t][r].value&&0!==e[t][n].value?(n-=1,this.slided=!0):0===e[t][r].value&&(r-=1)},slideRight:function(e,t,a){var r=e.length-2,n=e.length-1;while(r>=0)0!==e[t][n].value?(n-=1,r-=1):0!==e[t][n].value&&0!==e[t][r].value?(n-=1,r-=1,this.slided=!0):0===e[t][n].value&&0===e[t][r].value?r-=1:0===e[t][n].value&&0!==e[t][r].value&&(a.slide.push({from:4*t+r,to:4*t+n}),e[t][n].value=e[t][r].value+e[t][n].value,e[t][r].value=0,n-=1,r-=1,this.slided=!0)},registerControl:function(){var e=this;document.addEventListener("keydown",function(t){var a=t.keyCode;a>=37&&a<=40&&e.move(a)})}}},G={name:"GameField",components:{Cell:g},props:{},data:function(){return{board:this.$store.state.board,gameOver:!1,slided:!1,emptyStorage:!0,mergeAnimationsList:[],slideAnimationsList:[],mergeGameStateList:[],slideGameStateList:[]}},mixins:[y],mounted:function(){this.setupBoard()},computed:{checkGameOver:function(){for(var e=0;e<this.board.length;e+=1)if(0===this.board[e].value)return!1;return!0}},methods:{checkGameState:function(){this.moveRight("gamestate"),(!this.mergeGameStateList.length>0||!this.slideGameStateList.length>0)&&(this.gameOver=!0),this.mergeGameStateList=[],this.slideGameStateList=[]},savedBoard:function(){return this.$store.state.board},setupBoard:function(){this.$store.state.board.length>0?(this.board=this.$store.state.board,this.gameOver=!1):this.newGame(),this.registerControl()},generateNum:function(){var e=this;if(!this.checkGameOver){var t=function(){var t=Math.floor(Math.random()*e.board.length);return t},a=t();while(0!==this.board[a].value)a=t();this.board[a].value=Math.random()<.9?2:4}},newGame:function(){this.gameOver=!1,this.resetBoard(),this.$store.commit("saveGameBoard",[]),this.generateNum(),this.generateNum()},saveGame:function(){localStorage.setItem("boardD",JSON.stringify(this.board)),this.emptyStorage=!1},resumeGame:function(){var e=JSON.parse(localStorage.getItem("boardD"));this.board=e,localStorage.clear(),this.emptyStorage=!0},resetBoard:function(){this.board=Array(16);for(var e=0;e<this.board.length;e+=1)this.board[e]={value:0}}}},S=G,_=(a("80c6"),Object(f["a"])(S,u,l,!1,null,"8c86bf50",null));_.options.__file="GameField.vue";var T=_.exports,O={name:"app",components:{GameField:T}},w=O,x=(a("5c0b"),Object(f["a"])(w,o,s,!1,null,null,null));x.options.__file="App.vue";var C=x.exports,k=a("2f62"),L=a("0e44");r["a"].use(k["a"]);var R=new k["a"].Store({state:{board:[]},plugins:[Object(L["a"])()],mutations:{saveGameBoard:function(e,t){e.board=t}}});r["a"].config.productionTip=!1,r["a"].use(i.a,{name:"ls",bind:!0}),new r["a"]({store:R,render:function(e){return e(C)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var r=a("5e27"),n=a.n(r);n.a},"5e27":function(e,t,a){},"80c6":function(e,t,a){"use strict";var r=a("34fe"),n=a.n(r);n.a},b0ce:function(e,t,a){"use strict";var r=a("ef59"),n=a.n(r);n.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},ef59:function(e,t,a){}});
//# sourceMappingURL=app.692430c8.js.map